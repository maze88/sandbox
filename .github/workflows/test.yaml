name: Sandbox

on:
  push:
    tags:

env:
  DEFAULT_BRANCH: master

jobs:
  test:
    if: github.ref_type == 'tag'
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Determine base branch
      run: |
        if echo ${{ github.ref_name }} | grep beta; then
          echo BASE_BRANCH1=$DEFAULT_BRANCH | tee -a $GITHUB_ENV
        else
          echo BASE_BRANCH1=${{ github.ref_name }} | tee -a $GITHUB_ENV
        fi
        # or:
        echo BASE_BRANCH2=${{ contains(github.ref_name, 'beta') && env.DEFAULT_BRANCH || github.ref_name }} | tee -a $GITHUB_ENV
    - name: Display base branch
      run: |
        echo DEBUG
        echo $BASE_BRANCH1
        echo DEBUG
        echo $BASE_BRANCH2
        echo DEBUG

