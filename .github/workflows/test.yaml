name: Sandbox

on:
  push:
    tags:

env:
  DEFAULT_BRANCH: master

jobs:
  test:
    if: github.ref_type == 'tag'
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Determine base branch
      run: |
        if echo ${{ github.ref_name }} | grep beta; then
          base_branch=$DEFAULT_BRANCH
        else
          release_branch=$(echo ${{ github.ref_name }} | grep -Eo '^v[0-9]+\.[0-9]+')
          base_branch=${release_branch}.x
        fi
        echo BASE_BRANCH=$base_branch | tee -a $GITHUB_ENV
    - name: Display base branch
      run: |
        echo $BASE_BRANCH

