name: Sandbox

on:
  push:
    tags:

jobs:
  test:
    if: github.ref_type == 'tag'
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
      with:
        fetch-depth: 0
        fetch-tags: true
        ref: ${{ github.ref_name }}
    - name: Determine base branch
      run: |
        echo TEST1
        git branch --contains ${{ github.ref_name }}
        echo TEST2
        git branch --contains tags/${{ github.ref_name }}
        echo TEST3
        git log -1 --pretty='%D' ${{ github.ref_name }}
        echo TEST4
        echo BASE_BRANCH=$(true) >> $GITHUB_ENV  # TODO: set branch based on tag trigger event parent branch
    - name: Display base branch
      run: |
        echo $BASE_BRANCH
